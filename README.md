# Wiibot
机器人控制课程设计
写论文中

# 系统建模
对于机器人的平衡，纵向以及转向运动，可以将模型简化为三维空间中的类一阶倒立摆模型，即忽略腿长的变化，转向运动由两个驱动轮差速运动控制。
## 模型定义
称机器人机体质心到两个驱动轮转轴中心的连线为摆杆，得到如图1所示平衡车模型。
该模型的变量与参数定义如表1、表2所示。
图1 平衡车模型
表1 平衡车模型变量定义
| 符号 |           含义           |    正方向    | 单位 |
| :--: | :----------------------: | :----------: | :--: |
|  q   |    摆杆与竖直方向夹角    | 图示为正方向 | rad  |
|  j   |        摆杆偏航角        | 图示为正方向 | rad  |
|  xi  |        驱动轮位移        |  X轴正方向   |  m   |
|  xb  |         机体位移         |  X轴正方向   |  m   |
|  Pi  | 驱动轮对摆杆力的竖直分量 |   箭头所示   |  N   |
|  Pb  |   摆杆受到的竖直方向力   |   箭头所示   |  N   |
|  Ni  | 驱动轮对摆杆力的水平分量 |   箭头所示   |  N   |
|  Nb  |   摆杆受到的水平方向力   |   箭头所示   |  N   |
|  Ti  |      驱动轮输出力矩      |   箭头所示   | N·m  |

表2 平衡车模型参数定义

| 符号 | 单位  |                含义                |
| :--: | :---: | :--------------------------------: |
|  D   |   m   |            车体转向直径            |
|  R   |   m   |             驱动轮半径             |
|  L   |   m   | 摆杆质心到驱动轮转轴中心的直线长度 |
|  mw  |  kg   |             驱动轮质量             |
|  mb  |  kg   |              摆杆质量              |
|  Ib  | kg∙m2 |    摆杆绕质心关于Z轴的转动惯量     |
|  Iw  | kg∙m2 |         驱动轮转子转动惯量         |
|  Iz  | kg∙m2 |     整车质心关于Y轴的转动惯量      |

## 经典力学分析
## 1.2 经典力学分析

### 对驱动轮，有：
$$
m_w \ddot{x}_l = N_{fl} - N_l
$$
$$
I_w \frac{\ddot{x}_l}{R} = T_l - N_{fl}R
$$

### 对摆杆，有：
$$
m_b \ddot{x}_b = N_{fl} + N_{fr}
$$
$$
m_b \ddot{y}_b = P_r + P_l - m_b g
$$
$$
I_b \ddot{\theta}_b = (P_r + P_l)L \sin \theta_b - (N_r + N_l)L \cos \theta_b - (T_r + T_l)
$$

### 对整车，有：
$$
I_z \ddot{\phi} = \frac{D}{2}(N_l - N_r)
$$











